<%= simple_form_for :term, url: items_path, method: :get do |f| %>
<div class="container">
  <div class="row">
    <div class="col-md-4 col-md-offset-3 search">
      <% if @results.any? %>
        <%= f.input_field :query, label: false, placeholder: "Address",
        input_html: { value: @results.first.address }%>
      <% end %>
    </div>
    <div class="col-md-2 filter">
      <a class="btn-filter" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Filter</a>
    </div>
  </div>
</div>

<div class="collapse" id="collapseExample">
  <div class="filter-body">
    <div class="filter-modal">
      <div class="catg-filter">
        <%= f.input :catg, label: 'Filter by category:', as: :check_boxes, collection: Item::CATEGORY%>
      </div>
      <div class="type-filter">
        <%= f.input :att, label: 'Filter by type:', as: :check_boxes, collection: Item::TYPES%>
      </div>
      <div>
        <%= f.button :submit %>
      </div>
    </div>
  </div>
</div>
<% end %>

<% @items.each do |item| %>
<%= render 'shared/card_modal', item: item %>
<% end %>

<% if @query.present? %>
<div class="container">
  <div class="row">
    <% @items.each do |item| %>
    <div class="col-md-3">
      <%= render 'shared/card', item: item %>
    </div>
    <% end %>
  </div>
</div>
<% else %>
<div class="container">
  <div class="row">
    <div class="col-xs-11 col-md-10 col-centered">
      <div id="carousel" class="carousel slide" data-ride="carousel" data-type="multi" data-interval="false">
        <div class="carousel-inner">
          <% @items.each_with_index do |item, index| %>
          <div class="item <%= 'active' if index == 0 %>">
            <div class="carousel-col">
              <div class="img-responsive">
                <%= render 'shared/card', item: item %>
              </div>
            </div>
          </div>
          <% end %>
        </div>

        <!-- Controls -->
        <div class="left carousel-control">
          <a href="#carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
            <span class="sr-only"></span>
          </a>
        </div>
        <div class="right carousel-control">
          <a href="#carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
            <span class="sr-only"></span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<% end %>

<div
id="map"
style="width: 100%;
height: 600px;"
data-markers="<%= @markers.to_json %>"
data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>

